$.extend(BitAdmin,{mode:"tab",addTab:function(n){var o=$("#"+n.tabMainName+" > #tab_li_"+n.tabName).length>0,t,i,f,e;if(o)$("#tab_a_"+n.tabName).click();else{if(t=BitPage.GetRedirect(n),t==undefined)return;var s=$('<li id="tab_li_'+n.tabName+'"><\/li>'),r=$('<a href="#tab_content_'+n.tabName+'" data-toggle="tab" id="tab_a_'+n.tabName+'">'+n.tabTitle+"  <\/a>"),u=$('<span class="glyphicon glyphicon-repeat" style="float:none;font-size: 12px;"><\/span>');u.bind("click",function(){BitAdmin.refreshTab("iframe_"+n.tabName)});i=$('<span class="glyphicon glyphicon-remove"  style="float:none;font-size: 12px;"><\/span>');i.bind("click",function(){BitAdmin.closeTab(this)});r.append(u).append(i);$("#"+n.tabMainName).append(s.append(r));f=$('<iframe id="iframe_'+n.tabName+'" style="height:'+this.getIframeHeight()+' ; width: 100%;" src="'+t+'" frameborder="0" border="0" marginwidth="0" marginheight="0" scrolling="auto" allowtransparency="true"><\/iframe>');e=$('<div id="tab_content_'+n.tabName+'" role="tabpanel" class="tab-pane" id="'+n.tabName+'"><\/div>');$("#"+n.tabContentMainName).append(e.append(f));$("#tab_a_"+n.tabName).click();this.setTabsWidth()}},closeTab:function(n){var t=$(n).parent().parent().attr("id"),i=t.replace("tab_li_","");$("li.active").attr("id")==t&&$("li.active").prev().find("a").click();$("#"+t).remove();$("#tab_content_"+i).remove()},refreshTab:function(n){$("#"+n).attr("src",$("#"+n).attr("src")+"&isRefresh=true")},getIframeHeight:function(){return BitAdmin.mode=="tab"?$(window).height()-$("body > .wrapper >.main-header").height()-$("body > .wrapper .tab-title").height()*2-$("body > .wrapper .main-footer").height()+10+"px":BitAdmin.mode=="iframe"?$(window).height()-$("body > .wrapper >.main-header").height()-$("body > .wrapper .tab-title").height()*2-$("body > .wrapper .main-footer").height()-20+"px":void 0},setTabsWidth:function(){var n=window.innerWidth-$(".main-sidebar").width()-55,t=$("#page-tabs")[0].scrollWidth;$("#page-tabs").width(n);n<t&&$("#page-tabs").scrollLeft(t-n+100)},setMentHeight:function(){$(".sidebar").height($(".main-sidebar").height()-10)},Pages:{}});$.fn.extend({GetUserInfo:function(){$.get("../../account/getUser",function(n){if(n.code==1)alert(n.msg);else for(var t in n)$("."+t)!=null&&$("."+t).text(n[t])})},GetMenus:function(){function n(t,i,r){r!=""&&(r=r+">");$.each(t,function(t,u){var o=u.icon==null||u.icon==""?"fa-edit":u.icon,e,f;u.children!=null&&u.children.length>0?(f=$('<li class="treeview"><a href="javascript:void(0);"><i class="fa '+o+'"><\/i><span>'+u.name+'<\/span><span class="pull-right-container"><i class="fa fa-angle-left pull-right"><\/i><\/span><\/a><\/li>'),e=$('<ul class="treeview-menu"><\/ul>'),f.append(e),f.click(function(){BitAdmin.setMentHeight()}),i.append(f),n(u.children,e,r+u.name)):(f=$('<li><a href="javascript:void(0);"><i class="fa '+o+'"><\/i>'+u.name+"<\/a><\/li>"),i.append(f),f.click(function(){u.url!=undefined&&u.url!=null&&u.url!=""&&(BitAdmin.Pages[u.pageSign]={ModuleName:u.moduleName,PageName:u.name,Description:u.description},BitAdmin.mode=="tab"?BitAdmin.addTab({tabMainName:"page-tabs",tabName:"page_"+u.id,tabSign:u.pageSign,tabTitle:u.name,tabUrl:u.url,tabContentMainName:"tab-content",title:r+u.name}):BitAdmin.mode=="iframe"?$("[mode="+BitAdmin.mode+"] iframe").attr("src",u.url):BitAdmin.mode=="load"&&$("[mode="+BitAdmin.mode+"]").load(u.url))}))})}var t=$(this);$.get("../../account/getMenus",function(i){i.code==0?n(i.data,t,""):alert(i.msg)})}});